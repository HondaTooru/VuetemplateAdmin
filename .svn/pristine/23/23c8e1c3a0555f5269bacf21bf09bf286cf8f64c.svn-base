webpackJsonp([8],{"7PJ+":function(e,t,i){"use strict";var r=i("vLgD");function n(e){return Object(r.a)({url:"yequan/admin/scrollScreen",method:"post",data:e})}function a(e){return Object(r.a)({url:"yequan/admin/scrollScreen",method:"get",duration:3e3})}function o(e){return Object(r.a)({url:"yequan/admin/bars",method:"get",params:e})}function s(e){return Object(r.a)({url:"yequan/admin/bars",method:"post",data:e})}i.d(t,"c",function(){return n}),i.d(t,"b",function(){return a}),i.d(t,"a",function(){return o}),i.d(t,"d",function(){return s})},"7i3V":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"",""])},DIiy:function(e,t,i){var r=i("7i3V");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i("rjj0")("385025e9",r,!0)},sz0Q:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("woOf"),n=i.n(r),a=i("7PJ+"),o={name:"bullyscreen",data:function(){return{loading:!0,isLoading:!1,form:{bars_lucky:"",bars_vedio:""},list:[],add:[{bartime:"",barprices:""}]}},created:function(){this.getList()},methods:{deleteRow:function(e){var t=this;this.loading=!0,Object(a.d)({id:e.id,action:"del"}).then(function(i){t.loading=!1,t.list.splice(t.list.indexOf(e),1),t.$message({message:"删除成功",type:"success",duration:3e3})})},addItem:function(){var e=this;if(this.add[0].bartime.toString().trim()&&this.add[0].barprices.toString().trim()){this.isLoading=!0;var t=this.add[0];Object(a.d)(t).then(function(i){e.isLoading=!1,console.log(i),1===i.data.code?(e.list.push(n()({},t)),e.add[0].bartime=e.add[0].barprices="",e.$message({message:"添加成功",type:"success",duration:3e3})):e.$message({message:i.data.msg,type:"error",duration:3e3})}).catch(function(){e.isLoading=!1})}else this.$message({message:"请把信息输入完整",type:"error",duration:3e3})},getList:function(){var e=this;this.loading=!0,Object(a.a)().then(function(t){e.loading=!1,1===t.data.code?(e.from=t.data.switch,e.list=t.data.data.map(function(t){return e.$set(t,"edit",!1),t.originalTime=t.bartime,t.originalPrice=t.barprices,t})):e.$message({message:"error",type:"error",duration:3e3})}).catch(function(t){return e.loading=!1,t})},cancelEdit:function(e){e.time=e.originalTime,e.price=e.originalPrice,e.edit=!e.edit,this.$message({message:"您已经取消了",type:"warning",duration:2e3})},confirmEdit:function(e){var t=this;try{this.list.forEach(function(i){if(i.originalTime===e.bartime&&i.id!==e.id)throw t.$message({message:"已经存在重复的时间",type:"error",duration:3e3}),t.flag=!1,new Error("Error");t.flag=!0})}catch(e){console.log(e)}if(this.flag){this.loading=!0;var i=e.id,r=e.bartime,n={id:i,barprices:e.barprices,bartime:r};Object(a.d)(n).then(function(i){t.loading=!1,1===i.data.code?(e.originalTime=e.bartime,e.originalPrice=e.barprices,e.edit=!e.edit,t.$message({message:"修改成功",type:"success",duration:3e3})):t.$message({message:i.data.msg,type:"error",duration:3e3})})}}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bullyScreen"},[i("el-form",{attrs:{model:e.form,"label-position":"right","label-width":"100px"}},[i("el-form-item",{attrs:{label:"霸小视频"}},[i("el-switch",{model:{value:e.form.bars_vedio,callback:function(t){e.$set(e.form,"bars_vedio",t)},expression:"form.bars_vedio"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"新运霸屏"}},[i("el-switch",{model:{value:e.form.bars_lucky,callback:function(t){e.$set(e.form,"bars_lucky",t)},expression:"form.bars_lucky"}})],1)],1),e._v(" "),e._m(0),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list,border:""}},[i("el-table-column",{attrs:{label:"时间(秒)"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[i("el-input",{attrs:{"prefix-icon":"el-icon-edit"},model:{value:t.row.bartime,callback:function(i){e.$set(t.row,"bartime",e._n(i))},expression:"scope.row.bartime"}})]:i("span",[e._v(e._s(t.row.bartime))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"价格(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[i("el-input",{attrs:{"prefix-icon":"el-icon-edit"},model:{value:t.row.barprices,callback:function(i){e.$set(t.row,"barprices",e._n(i))},expression:"scope.row.barprices"}})]:i("span",[e._v(e._s(t.row.barprices))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button-group",[t.row.edit?[i("el-button",{attrs:{type:"warning",icon:"el-icon-refresh"},nativeOn:{click:function(i){i.preventDefault(),e.cancelEdit(t.row)}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"success",icon:"el-icon-circle-check-outline"},nativeOn:{click:function(i){i.preventDefault(),e.confirmEdit(t.row)}}},[e._v("保存")])]:[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},nativeOn:{click:function(e){e.preventDefault(),t.row.edit=!t.row.edit}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-remove-outline"},nativeOn:{click:function(i){i.preventDefault(),e.deleteRow(t.row)}}},[e._v("删除")])]],2)]}}])})],1),e._v(" "),e._m(1),e._v(" "),i("el-table",{attrs:{data:e.add,border:""}},[i("el-table-column",{attrs:{label:"时间(秒)"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{"prefix-icon":"el-icon-edit"},model:{value:t.row.bartime,callback:function(i){e.$set(t.row,"bartime",e._n(i))},expression:"scope.row.bartime"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"价格(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{"prefix-icon":"el-icon-edit"},model:{value:t.row.barprices,callback:function(i){e.$set(t.row,"barprices",e._n(i))},expression:"scope.row.barprices"}})]}}])}),e._v(" "),i("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",loading:e.isLoading},nativeOn:{click:function(t){t.preventDefault(),e.addItem(t)}}},[e._v("添加")])]}}])})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip"},[t("p",[this._v("霸屏信息列表")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip",staticStyle:{margin:"20px 0"}},[t("p",[this._v("添加霸屏信息")])])}]};var c=i("VU/8")(o,s,!1,function(e){i("DIiy")},null,null);t.default=c.exports}});